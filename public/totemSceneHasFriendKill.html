<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Totem Scene</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Jersey+10&display=swap" rel="stylesheet">
</head>

<body class="backgroundJungle">
    <div class="dialogue-box">
        <p id="dialogue"></p>
        <button id="next-btn" onclick="nextDialogue()">Next</button>
    </div>

    <img id="friendAirport-image" src="/images/airportFriend.png" alt="Friend at airport" class="characterLeftSide">

    <script>
        let hasFriend = sessionStorage.getItem('hasFriend') === 'true'; // Check if Carla is with Ale
        document.getElementById('friendAirport-image').style.display = 'none';

        let dialoguesWithCarlaKill = [
            "He pounces for the deer, grabbing at its neck to drag it down. He miscalculates the force it’d take and topples over from the excessive force. In the process, the totem slips out his hand. He reaches for it, but the deer recovers swiftly, snatching it with its mouth. Before Ale can get back on his feet, it's already darting into the forest. He curses and turns back to see Carla standing with her arms crossed.",
            "Carla: Great there goes our dinner.",
            "Ale: Yea.",
            "Carla: What were you grabbing for on the ground? I couldn’t see from where I was standing.",
            "He thanks whatever god there is that Carla didn’t see him lose the totem.",
            "Ale: I was grabbing a stick to hit the deer. I don’t think we’ll be able to hunt for extra food so we should go directly to the temple instead of trying to find the totem.",
            "Carla: What? Why such a quick change of heart? You don’t believe what the villager said?",
            "Ale: It was probably a silly story. We’ll find another way. Let’s just go before the sun sets."
        ];
    
        let dialogues = dialoguesWithCarlaKill;
        let currentDialogue = 0;
    
        // Set the initial dialogue
        document.getElementById('dialogue').textContent = dialogues[currentDialogue];
        
        function nextDialogue() {
            if (currentDialogue < dialogues.length - 1) {
                currentDialogue++;
                document.getElementById('dialogue').textContent = dialogues[currentDialogue];

                // now show friend
                if (currentDialogue === 1) {
                    if (hasFriend === true) {
                        document.getElementById('friendAirport-image').style.display = 'block';
                    }
                }
            } else {
                document.getElementById('dialogue').textContent = "";
                document.getElementById('next-btn').style.display = 'none'; // Hide next button when finished
                window.location.href = 'trapScene.html';
            }
        }

        function showQuestionPrompt() {
            document.getElementById('question-container').style.display = 'block';
        }
    </script>

</body>

</html>